# 고스톱 룰 명확화

## 🎮 확정된 고스톱 룰

### 1. 플레이어 수
- ✅ **2~4명만 가능**
- ❌ 5명 이상 불가능

### 2. 광팜 (광 팔기)
- ✅ 광을 판 사람은 **게임에서 나감** (더 이상 진행 불가)
- ✅ 광 판 사람은 **점수옵션 계산에도 참여하지 않음**
- 계산: (광 하나당 가격) × (판 광 수) × (다른 플레이어 수)

### 3. 뻑 옵션 (상호 배타적)
- ✅ **첫뻑, 연뻑, 삼연뻑 중 하나만 선택 가능**
- ❌ 동시에 여러 뻑을 가질 수 없음
- ⚠️ **단, 뻑과 따닥은 동시 가능** (따닥은 별개)

### 4. 삼연뻑
- ✅ **삼연뻑 발생 시 게임 즉시 종료**

### 5. 승자
- ✅ **승자는 라운드당 1명만 존재**

### 6. 고박
- ✅ **고박자는 라운드당 1명만 존재**
- ✅ 고박은 **패자 계산에만 적용**
  - 고박자가 다른 패자들의 금액을 대신 지불
- ✅ 점수옵션(뻑, 따닥)은 **고박과 무관하게 각자 지불**

## 📊 계산 우선순위

1. **광팜 계산** (있을 경우)
   - 광 판 사람은 나머지 게임 진행 안 함

2. **패자 계산** (승자가 있을 경우)
   - 고박이 있으면 고박자가 다른 패자들의 금액까지 대신 지불

3. **점수옵션 계산** (뻑, 따닥)
   - 광 판 사람 제외
   - 고박과 무관하게 모두 각자 지불

## 🔍 예시

### 예시 1: 고박 + 연뻑
```
조건:
- 4명 게임
- 승자 (연뻑, 8점)
- 고박자 (피박)
- 패자2
- 패자3

계산:
1. 패자 계산
   - 고박자 본인(피박): 800 × 2 = 1,600원
   - 패자2: 800원
   - 패자3: 800원
   - 고박자가 모두 지불: 1,600 + 800 + 800 = 3,200원

2. 연뻑 (고박과 무관)
   - 승자가 받음: 200 × 3 = 600원
   - 고박자 지불: 200원
   - 패자2 지불: 200원
   - 패자3 지불: 200원

최종:
- 승자: +3,200 + 600 = +3,800원
- 고박자: -3,200 - 200 = -3,400원
- 패자2: 0 - 200 = -200원 (고박자가 패자 계산 대신 냄)
- 패자3: 0 - 200 = -200원 (고박자가 패자 계산 대신 냄)
```

### 예시 2: 광팜 + 고박 + 첫뻑
```
조건:
- 4명 게임
- 광팜 (1광)
- 승자 (첫뻑, 7점)
- 고박자
- 일반 패자

계산:
1. 광팜: 200 × 3 = 600원 (광 판 사람이 받음)
   - 광 판 사람은 이후 게임 진행 안 함

2. 패자 계산 (광 판 사람 제외)
   - 고박자: 700원
   - 일반 패자: 700원
   - 고박자가 모두 지불: 1,400원

3. 첫뻑 (광 판 사람 제외)
   - 승자가 받음: 100 × 2 = 200원
   - 고박자 지불: 100원
   - 일반 패자 지불: 100원

최종:
- 광팜: +600원 (이후 게임 불참)
- 승자: -200 + 1,400 + 200 = +1,400원
- 고박자: -200 - 1,400 - 100 = -1,700원
- 일반 패자: -200 - 0 - 100 = -300원
```

## ✅ 테스트 검증

이 룰들은 **113개의 테스트**로 모두 검증되었습니다:
- CalculateGameResultUseCaseTest: 7개 (통합 테스트) ⭐ NEW
- CalculateSellScoreUseCaseTest: 5개
- CalculateLoserScoreUseCaseTest: 11개
- CalculateScoreOptionUseCaseTest: 11개
- CalculateGameIntegrationTest: 7개
- CalculateEdgeCasesTest: 15개
- CalculateSpecificCasesTest: 8개
- CalculateComprehensiveTest: 49개 (5명 케이스 제거됨)

모든 테스트 통과! ✅

